{"ast":null,"code":"module.exports = LineString;\n\nvar util = require('util');\n\nvar Geometry = require('./geometry');\n\nvar Types = require('./types');\n\nvar Point = require('./point');\n\nvar BinaryWriter = require('./binarywriter');\n\nfunction LineString(points, srid) {\n  Geometry.call(this);\n  this.points = points || [];\n  this.srid = srid;\n\n  if (this.points.length > 0) {\n    this.hasZ = this.points[0].hasZ;\n    this.hasM = this.points[0].hasM;\n  }\n}\n\nutil.inherits(LineString, Geometry);\n\nLineString.Z = function (points, srid) {\n  var lineString = new LineString(points, srid);\n  lineString.hasZ = true;\n  return lineString;\n};\n\nLineString.M = function (points, srid) {\n  var lineString = new LineString(points, srid);\n  lineString.hasM = true;\n  return lineString;\n};\n\nLineString.ZM = function (points, srid) {\n  var lineString = new LineString(points, srid);\n  lineString.hasZ = true;\n  lineString.hasM = true;\n  return lineString;\n};\n\nLineString._parseWkt = function (value, options) {\n  var lineString = new LineString();\n  lineString.srid = options.srid;\n  lineString.hasZ = options.hasZ;\n  lineString.hasM = options.hasM;\n  if (value.isMatch(['EMPTY'])) return lineString;\n  value.expectGroupStart();\n  lineString.points.push.apply(lineString.points, value.matchCoordinates(options));\n  value.expectGroupEnd();\n  return lineString;\n};\n\nLineString._parseWkb = function (value, options) {\n  var lineString = new LineString();\n  lineString.srid = options.srid;\n  lineString.hasZ = options.hasZ;\n  lineString.hasM = options.hasM;\n  var pointCount = value.readUInt32();\n\n  for (var i = 0; i < pointCount; i++) lineString.points.push(Point._readWkbPoint(value, options));\n\n  return lineString;\n};\n\nLineString._parseTwkb = function (value, options) {\n  var lineString = new LineString();\n  lineString.hasZ = options.hasZ;\n  lineString.hasM = options.hasM;\n  if (options.isEmpty) return lineString;\n  var previousPoint = new Point(0, 0, options.hasZ ? 0 : undefined, options.hasM ? 0 : undefined);\n  var pointCount = value.readVarInt();\n\n  for (var i = 0; i < pointCount; i++) lineString.points.push(Point._readTwkbPoint(value, options, previousPoint));\n\n  return lineString;\n};\n\nLineString._parseGeoJSON = function (value) {\n  var lineString = new LineString();\n  if (value.coordinates.length > 0) lineString.hasZ = value.coordinates[0].length > 2;\n\n  for (var i = 0; i < value.coordinates.length; i++) lineString.points.push(Point._readGeoJSONPoint(value.coordinates[i]));\n\n  return lineString;\n};\n\nLineString.prototype.toWkt = function () {\n  if (this.points.length === 0) return this._getWktType(Types.wkt.LineString, true);\n  return this._getWktType(Types.wkt.LineString, false) + this._toInnerWkt();\n};\n\nLineString.prototype._toInnerWkt = function () {\n  var innerWkt = '(';\n\n  for (var i = 0; i < this.points.length; i++) innerWkt += this._getWktCoordinate(this.points[i]) + ',';\n\n  innerWkt = innerWkt.slice(0, -1);\n  innerWkt += ')';\n  return innerWkt;\n};\n\nLineString.prototype.toWkb = function (parentOptions) {\n  var wkb = new BinaryWriter(this._getWkbSize());\n  wkb.writeInt8(1);\n\n  this._writeWkbType(wkb, Types.wkb.LineString, parentOptions);\n\n  wkb.writeUInt32LE(this.points.length);\n\n  for (var i = 0; i < this.points.length; i++) this.points[i]._writeWkbPoint(wkb);\n\n  return wkb.buffer;\n};\n\nLineString.prototype.toTwkb = function () {\n  var twkb = new BinaryWriter(0, true);\n  var precision = Geometry.getTwkbPrecision(5, 0, 0);\n  var isEmpty = this.points.length === 0;\n\n  this._writeTwkbHeader(twkb, Types.wkb.LineString, precision, isEmpty);\n\n  if (this.points.length > 0) {\n    twkb.writeVarInt(this.points.length);\n    var previousPoint = new Point(0, 0, 0, 0);\n\n    for (var i = 0; i < this.points.length; i++) this.points[i]._writeTwkbPoint(twkb, precision, previousPoint);\n  }\n\n  return twkb.buffer;\n};\n\nLineString.prototype._getWkbSize = function () {\n  var coordinateSize = 16;\n  if (this.hasZ) coordinateSize += 8;\n  if (this.hasM) coordinateSize += 8;\n  return 1 + 4 + 4 + this.points.length * coordinateSize;\n};\n\nLineString.prototype.toGeoJSON = function (options) {\n  var geoJSON = Geometry.prototype.toGeoJSON.call(this, options);\n  geoJSON.type = Types.geoJSON.LineString;\n  geoJSON.coordinates = [];\n\n  for (var i = 0; i < this.points.length; i++) {\n    if (this.hasZ) geoJSON.coordinates.push([this.points[i].x, this.points[i].y, this.points[i].z]);else geoJSON.coordinates.push([this.points[i].x, this.points[i].y]);\n  }\n\n  return geoJSON;\n};","map":{"version":3,"names":["module","exports","LineString","util","require","Geometry","Types","Point","BinaryWriter","points","srid","call","length","hasZ","hasM","inherits","Z","lineString","M","ZM","_parseWkt","value","options","isMatch","expectGroupStart","push","apply","matchCoordinates","expectGroupEnd","_parseWkb","pointCount","readUInt32","i","_readWkbPoint","_parseTwkb","isEmpty","previousPoint","undefined","readVarInt","_readTwkbPoint","_parseGeoJSON","coordinates","_readGeoJSONPoint","prototype","toWkt","_getWktType","wkt","_toInnerWkt","innerWkt","_getWktCoordinate","slice","toWkb","parentOptions","wkb","_getWkbSize","writeInt8","_writeWkbType","writeUInt32LE","_writeWkbPoint","buffer","toTwkb","twkb","precision","getTwkbPrecision","_writeTwkbHeader","writeVarInt","_writeTwkbPoint","coordinateSize","toGeoJSON","geoJSON","type","x","y","z"],"sources":["/Users/aurele/node_modules/wkx/lib/linestring.js"],"sourcesContent":["module.exports = LineString;\r\n\r\nvar util = require('util');\r\n\r\nvar Geometry = require('./geometry');\r\nvar Types = require('./types');\r\nvar Point = require('./point');\r\nvar BinaryWriter = require('./binarywriter');\r\n\r\nfunction LineString(points, srid) {\r\n    Geometry.call(this);\r\n\r\n    this.points = points || [];\r\n\tthis.srid = srid;\r\n\r\n    if (this.points.length > 0) {\r\n        this.hasZ = this.points[0].hasZ;\r\n        this.hasM = this.points[0].hasM;\r\n    }\r\n}\r\n\r\nutil.inherits(LineString, Geometry);\r\n\r\nLineString.Z = function (points, srid) {\r\n    var lineString = new LineString(points, srid);\r\n    lineString.hasZ = true;\r\n    return lineString;\r\n};\r\n\r\nLineString.M = function (points, srid) {\r\n    var lineString = new LineString(points, srid);\r\n    lineString.hasM = true;\r\n    return lineString;\r\n};\r\n\r\nLineString.ZM = function (points, srid) {\r\n    var lineString = new LineString(points, srid);\r\n    lineString.hasZ = true;\r\n    lineString.hasM = true;\r\n    return lineString;\r\n};\r\n\r\nLineString._parseWkt = function (value, options) {\r\n    var lineString = new LineString();\r\n    lineString.srid = options.srid;\r\n    lineString.hasZ = options.hasZ;\r\n    lineString.hasM = options.hasM;\r\n\r\n    if (value.isMatch(['EMPTY']))\r\n        return lineString;\r\n\r\n    value.expectGroupStart();\r\n    lineString.points.push.apply(lineString.points, value.matchCoordinates(options));\r\n    value.expectGroupEnd();\r\n\r\n    return lineString;\r\n};\r\n\r\nLineString._parseWkb = function (value, options) {\r\n    var lineString = new LineString();\r\n    lineString.srid = options.srid;\r\n    lineString.hasZ = options.hasZ;\r\n    lineString.hasM = options.hasM;\r\n\r\n    var pointCount = value.readUInt32();\r\n\r\n    for (var i = 0; i < pointCount; i++)\r\n        lineString.points.push(Point._readWkbPoint(value, options));\r\n\r\n    return lineString;\r\n};\r\n\r\nLineString._parseTwkb = function (value, options) {\r\n    var lineString = new LineString();\r\n    lineString.hasZ = options.hasZ;\r\n    lineString.hasM = options.hasM;\r\n\r\n    if (options.isEmpty)\r\n        return lineString;\r\n\r\n    var previousPoint = new Point(0, 0, options.hasZ ? 0 : undefined, options.hasM ? 0 : undefined);\r\n    var pointCount = value.readVarInt();\r\n\r\n    for (var i = 0; i < pointCount; i++)\r\n        lineString.points.push(Point._readTwkbPoint(value, options, previousPoint));\r\n\r\n    return lineString;\r\n};\r\n\r\nLineString._parseGeoJSON = function (value) {\r\n    var lineString = new LineString();\r\n\r\n    if (value.coordinates.length > 0)\r\n        lineString.hasZ = value.coordinates[0].length > 2;\r\n\r\n    for (var i = 0; i < value.coordinates.length; i++)\r\n        lineString.points.push(Point._readGeoJSONPoint(value.coordinates[i]));\r\n\r\n    return lineString;\r\n};\r\n\r\nLineString.prototype.toWkt = function () {\r\n    if (this.points.length === 0)\r\n        return this._getWktType(Types.wkt.LineString, true);\r\n\r\n    return this._getWktType(Types.wkt.LineString, false) + this._toInnerWkt();\r\n};\r\n\r\nLineString.prototype._toInnerWkt = function () {\r\n    var innerWkt = '(';\r\n\r\n    for (var i = 0; i < this.points.length; i++)\r\n        innerWkt += this._getWktCoordinate(this.points[i]) + ',';\r\n\r\n    innerWkt = innerWkt.slice(0, -1);\r\n    innerWkt += ')';\r\n\r\n    return innerWkt;\r\n};\r\n\r\nLineString.prototype.toWkb = function (parentOptions) {\r\n    var wkb = new BinaryWriter(this._getWkbSize());\r\n\r\n    wkb.writeInt8(1);\r\n\r\n    this._writeWkbType(wkb, Types.wkb.LineString, parentOptions);\r\n    wkb.writeUInt32LE(this.points.length);\r\n\r\n    for (var i = 0; i < this.points.length; i++)\r\n        this.points[i]._writeWkbPoint(wkb);\r\n\r\n    return wkb.buffer;\r\n};\r\n\r\nLineString.prototype.toTwkb = function () {\r\n    var twkb = new BinaryWriter(0, true);\r\n\r\n    var precision = Geometry.getTwkbPrecision(5, 0, 0);\r\n    var isEmpty = this.points.length === 0;\r\n\r\n    this._writeTwkbHeader(twkb, Types.wkb.LineString, precision, isEmpty);\r\n\r\n    if (this.points.length > 0) {\r\n        twkb.writeVarInt(this.points.length);\r\n\r\n        var previousPoint = new Point(0, 0, 0, 0);\r\n        for (var i = 0; i < this.points.length; i++)\r\n            this.points[i]._writeTwkbPoint(twkb, precision, previousPoint);\r\n    }\r\n\r\n    return twkb.buffer;\r\n};\r\n\r\nLineString.prototype._getWkbSize = function () {\r\n    var coordinateSize = 16;\r\n\r\n    if (this.hasZ)\r\n        coordinateSize += 8;\r\n    if (this.hasM)\r\n        coordinateSize += 8;\r\n\r\n    return 1 + 4 + 4 + (this.points.length * coordinateSize);\r\n};\r\n\r\nLineString.prototype.toGeoJSON = function (options) {\r\n    var geoJSON = Geometry.prototype.toGeoJSON.call(this, options);\r\n    geoJSON.type = Types.geoJSON.LineString;\r\n    geoJSON.coordinates = [];\r\n\r\n    for (var i = 0; i < this.points.length; i++) {\r\n        if (this.hasZ)\r\n            geoJSON.coordinates.push([this.points[i].x, this.points[i].y, this.points[i].z]);\r\n        else\r\n            geoJSON.coordinates.push([this.points[i].x, this.points[i].y]);\r\n    }\r\n\r\n    return geoJSON;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}