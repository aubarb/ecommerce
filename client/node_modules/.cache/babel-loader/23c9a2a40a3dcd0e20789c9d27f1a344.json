{"ast":null,"code":"'use strict';\n\nmodule.exports = exports = handle_gyp_opts;\n\nconst versioning = require('./versioning.js');\n\nconst napi = require('./napi.js');\n/*\n\nHere we gather node-pre-gyp generated options (from versioning) and pass them along to node-gyp.\n\nWe massage the args and options slightly to account for differences in what commands mean between\nnode-pre-gyp and node-gyp (e.g. see the difference between \"build\" and \"rebuild\" below)\n\nKeep in mind: the values inside `argv` and `gyp.opts` below are different depending on whether\nnode-pre-gyp is called directory, or if it is called in a `run-script` phase of npm.\n\nWe also try to preserve any command line options that might have been passed to npm or node-pre-gyp.\nBut this is fairly difficult without passing way to much through. For example `gyp.opts` contains all\nthe process.env and npm pushes a lot of variables into process.env which node-pre-gyp inherits. So we have\nto be very selective about what we pass through.\n\nFor example:\n\n`npm install --build-from-source` will give:\n\nargv == [ 'rebuild' ]\ngyp.opts.argv == { remain: [ 'install' ],\n  cooked: [ 'install', '--fallback-to-build' ],\n  original: [ 'install', '--fallback-to-build' ] }\n\n`./bin/node-pre-gyp build` will give:\n\nargv == []\ngyp.opts.argv == { remain: [ 'build' ],\n  cooked: [ 'build' ],\n  original: [ '-C', 'test/app1', 'build' ] }\n\n*/\n// select set of node-pre-gyp versioning info\n// to share with node-gyp\n\n\nconst share_with_node_gyp = ['module', 'module_name', 'module_path', 'napi_version', 'node_abi_napi', 'napi_build_version', 'node_napi_label'];\n\nfunction handle_gyp_opts(gyp, argv, callback) {\n  // Collect node-pre-gyp specific variables to pass to node-gyp\n  const node_pre_gyp_options = []; // generate custom node-pre-gyp versioning info\n\n  const napi_build_version = napi.get_napi_build_version_from_command_args(argv);\n  const opts = versioning.evaluate(gyp.package_json, gyp.opts, napi_build_version);\n  share_with_node_gyp.forEach(key => {\n    const val = opts[key];\n\n    if (val) {\n      node_pre_gyp_options.push('--' + key + '=' + val);\n    } else if (key === 'napi_build_version') {\n      node_pre_gyp_options.push('--' + key + '=0');\n    } else {\n      if (key !== 'napi_version' && key !== 'node_abi_napi') return callback(new Error('Option ' + key + ' required but not found by node-pre-gyp'));\n    }\n  }); // Collect options that follow the special -- which disables nopt parsing\n\n  const unparsed_options = [];\n  let double_hyphen_found = false;\n  gyp.opts.argv.original.forEach(opt => {\n    if (double_hyphen_found) {\n      unparsed_options.push(opt);\n    }\n\n    if (opt === '--') {\n      double_hyphen_found = true;\n    }\n  }); // We try respect and pass through remaining command\n  // line options (like --foo=bar) to node-gyp\n\n  const cooked = gyp.opts.argv.cooked;\n  const node_gyp_options = [];\n  cooked.forEach(value => {\n    if (value.length > 2 && value.slice(0, 2) === '--') {\n      const key = value.slice(2);\n      const val = cooked[cooked.indexOf(value) + 1];\n\n      if (val && val.indexOf('--') === -1) {\n        // handle '--foo=bar' or ['--foo','bar']\n        node_gyp_options.push('--' + key + '=' + val);\n      } else {\n        // pass through --foo\n        node_gyp_options.push(value);\n      }\n    }\n  });\n  const result = {\n    'opts': opts,\n    'gyp': node_gyp_options,\n    'pre': node_pre_gyp_options,\n    'unparsed': unparsed_options\n  };\n  return callback(null, result);\n}","map":{"version":3,"names":["module","exports","handle_gyp_opts","versioning","require","napi","share_with_node_gyp","gyp","argv","callback","node_pre_gyp_options","napi_build_version","get_napi_build_version_from_command_args","opts","evaluate","package_json","forEach","key","val","push","Error","unparsed_options","double_hyphen_found","original","opt","cooked","node_gyp_options","value","length","slice","indexOf","result"],"sources":["/Users/aurele/Desktop/E-Commerce App/views/node_modules/@mapbox/node-pre-gyp/lib/util/handle_gyp_opts.js"],"sourcesContent":["'use strict';\n\nmodule.exports = exports = handle_gyp_opts;\n\nconst versioning = require('./versioning.js');\nconst napi = require('./napi.js');\n\n/*\n\nHere we gather node-pre-gyp generated options (from versioning) and pass them along to node-gyp.\n\nWe massage the args and options slightly to account for differences in what commands mean between\nnode-pre-gyp and node-gyp (e.g. see the difference between \"build\" and \"rebuild\" below)\n\nKeep in mind: the values inside `argv` and `gyp.opts` below are different depending on whether\nnode-pre-gyp is called directory, or if it is called in a `run-script` phase of npm.\n\nWe also try to preserve any command line options that might have been passed to npm or node-pre-gyp.\nBut this is fairly difficult without passing way to much through. For example `gyp.opts` contains all\nthe process.env and npm pushes a lot of variables into process.env which node-pre-gyp inherits. So we have\nto be very selective about what we pass through.\n\nFor example:\n\n`npm install --build-from-source` will give:\n\nargv == [ 'rebuild' ]\ngyp.opts.argv == { remain: [ 'install' ],\n  cooked: [ 'install', '--fallback-to-build' ],\n  original: [ 'install', '--fallback-to-build' ] }\n\n`./bin/node-pre-gyp build` will give:\n\nargv == []\ngyp.opts.argv == { remain: [ 'build' ],\n  cooked: [ 'build' ],\n  original: [ '-C', 'test/app1', 'build' ] }\n\n*/\n\n// select set of node-pre-gyp versioning info\n// to share with node-gyp\nconst share_with_node_gyp = [\n  'module',\n  'module_name',\n  'module_path',\n  'napi_version',\n  'node_abi_napi',\n  'napi_build_version',\n  'node_napi_label'\n];\n\nfunction handle_gyp_opts(gyp, argv, callback) {\n\n  // Collect node-pre-gyp specific variables to pass to node-gyp\n  const node_pre_gyp_options = [];\n  // generate custom node-pre-gyp versioning info\n  const napi_build_version = napi.get_napi_build_version_from_command_args(argv);\n  const opts = versioning.evaluate(gyp.package_json, gyp.opts, napi_build_version);\n  share_with_node_gyp.forEach((key) => {\n    const val = opts[key];\n    if (val) {\n      node_pre_gyp_options.push('--' + key + '=' + val);\n    } else if (key === 'napi_build_version') {\n      node_pre_gyp_options.push('--' + key + '=0');\n    } else {\n      if (key !== 'napi_version' && key !== 'node_abi_napi')\n        return callback(new Error('Option ' + key + ' required but not found by node-pre-gyp'));\n    }\n  });\n\n  // Collect options that follow the special -- which disables nopt parsing\n  const unparsed_options = [];\n  let double_hyphen_found = false;\n  gyp.opts.argv.original.forEach((opt) => {\n    if (double_hyphen_found) {\n      unparsed_options.push(opt);\n    }\n    if (opt === '--') {\n      double_hyphen_found = true;\n    }\n  });\n\n  // We try respect and pass through remaining command\n  // line options (like --foo=bar) to node-gyp\n  const cooked = gyp.opts.argv.cooked;\n  const node_gyp_options = [];\n  cooked.forEach((value) => {\n    if (value.length > 2 && value.slice(0, 2) === '--') {\n      const key = value.slice(2);\n      const val = cooked[cooked.indexOf(value) + 1];\n      if (val && val.indexOf('--') === -1) { // handle '--foo=bar' or ['--foo','bar']\n        node_gyp_options.push('--' + key + '=' + val);\n      } else { // pass through --foo\n        node_gyp_options.push(value);\n      }\n    }\n  });\n\n  const result = { 'opts': opts, 'gyp': node_gyp_options, 'pre': node_pre_gyp_options, 'unparsed': unparsed_options };\n  return callback(null, result);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}