{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Deferred = void 0;\n\nconst TimeoutError_1 = require(\"./TimeoutError\");\n\nclass Deferred {\n  constructor() {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      this._resolve = resolve;\n    });\n  }\n\n  registerTimeout(timeoutInMillis, callback) {\n    if (this._timeout) return;\n    this._timeout = setTimeout(() => {\n      callback();\n      this.reject(new TimeoutError_1.TimeoutError('Operation timeout'));\n    }, timeoutInMillis);\n  }\n\n  _clearTimeout() {\n    if (!this._timeout) return;\n    clearTimeout(this._timeout);\n  }\n\n  resolve(value) {\n    this._clearTimeout();\n\n    this._resolve(value);\n  }\n\n  reject(error) {\n    this._clearTimeout();\n\n    this._reject(error);\n  }\n\n  promise() {\n    return this._promise;\n  }\n\n}\n\nexports.Deferred = Deferred;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAOA,MAAaA,QAAb,CAAqB;EAMnBC;IACE,KAAKC,QAAL,GAAgB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAoB;MAC9C,KAAKC,OAAL,GAAeD,MAAf;MACA,KAAKE,QAAL,GAAgBH,OAAhB;IACD,CAHe,CAAhB;EAID;;EAEDI,eAAe,CAACC,eAAD,EAA0BC,QAA1B,EAA4C;IACzD,IAAI,KAAKC,QAAT,EAAmB;IAEnB,KAAKA,QAAL,GAAgBC,UAAU,CAAC,MAAK;MAC9BF,QAAQ;MACR,KAAKL,MAAL,CAAY,IAAIQ,2BAAJ,CAAiB,mBAAjB,CAAZ;IACD,CAHyB,EAGvBJ,eAHuB,CAA1B;EAID;;EAESK,aAAa;IACrB,IAAI,CAAC,KAAKH,QAAV,EAAoB;IACpBI,YAAY,CAAC,KAAKJ,QAAN,CAAZ;EACD;;EAEDP,OAAO,CAACY,KAAD,EAAS;IACd,KAAKF,aAAL;;IACA,KAAKP,QAAL,CAAcS,KAAd;EACD;;EAEDX,MAAM,CAACY,KAAD,EAAa;IACjB,KAAKH,aAAL;;IACA,KAAKR,OAAL,CAAaW,KAAb;EACD;;EAEDC,OAAO;IACL,OAAO,KAAKhB,QAAZ;EACD;;AAvCkB;;AAArBiB","names":["Deferred","constructor","_promise","Promise","resolve","reject","_reject","_resolve","registerTimeout","timeoutInMillis","callback","_timeout","setTimeout","TimeoutError_1","_clearTimeout","clearTimeout","value","error","promise","exports"],"sources":["../src/Deferred.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}